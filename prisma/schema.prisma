generator client {
    provider = "prisma-client-js"
}

// SUPABASE_SESSION    for model updates
// SUPABASE_TRANSACTION    for queries (prod)

datasource db {
    provider = "postgresql"
    url      = env("SUPABASE_TRANSACTION")
}

model Payable {
    id          String   @id @default(uuid())
    createdAt   DateTime @default(now())
    updatedAt   DateTime @updatedAt
    name        String   @db.VarChar(255)
    payedTo     String   @db.VarChar(255)
    description String   @db.VarChar(255)
    amount      Decimal  @db.Decimal(10, 2)

    tags Tag[]

    authorId        String @db.VarChar(255)
    payableSourceId String
}

model Receivable {
    id           String   @id @default(uuid())
    createdAt    DateTime @default(now())
    updatedAt    DateTime @updatedAt
    name         String   @db.VarChar(255)
    receivedFrom String   @db.VarChar(255)
    description  String   @db.VarChar(255)
    amount       Decimal  @db.Decimal(10, 2)

    tags Tag[]

    authorId String @db.VarChar(255)
}

model BudgetPartition {
    id          String   @id @default(uuid())
    createdAt   DateTime @default(now())
    updatedAt   DateTime @updatedAt
    name        String   @db.VarChar(255)
    description String   @db.VarChar(255)
    amount      Decimal  @db.Decimal(10, 2)
    dueDate     DateTime

    tags Tag[]

    authorId String @db.VarChar(255)
}

model Tag {
    id          String   @id @default(uuid())
    createdAt   DateTime @default(now())
    updatedAt   DateTime @updatedAt
    name        String   @db.VarChar(255)
    description String   @db.VarChar(255)
    authorId    String   @db.VarChar(255)

    payables         Payable[]
    receivables      Receivable[]
    budgetPartitions BudgetPartition[]
}

model PayableSource {
    id          String   @id @default(uuid())
    createdAt   DateTime @default(now())
    updatedAt   DateTime @updatedAt
    name        String   @db.VarChar(255)
    description String   @db.VarChar(255)
    authorId    String   @db.VarChar(255)
}
