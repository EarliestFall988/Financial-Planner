generator client {
    provider = "prisma-client-js"
}

// SUPABASE_SESSION    for model updates
// SUPABASE_TRANSACTION    for queries (prod)

datasource db {
    provider = "postgresql"
    url      = env("SUPABASE_TRANSACTION")
}

model Payable {
    id        String   @id @default(uuid())
    createdAt DateTime @default(now())
    updatedAt DateTime @updatedAt

    name        String   @db.VarChar(255)
    payedTo     String   @db.VarChar(255)
    description String   @db.VarChar(255)
    amount      Decimal  @db.Decimal(10, 2)
    date        DateTime @default(now())

    Budget   Split?  @relation(fields: [budgetId], references: [id])
    budgetId String?

    authorId String @db.VarChar(255)
}

model Receivable {
    id        String   @id @default(uuid())
    createdAt DateTime @default(now())
    updatedAt DateTime @updatedAt

    name         String   @db.VarChar(255)
    receivedFrom String   @db.VarChar(255)
    description  String   @db.VarChar(255)
    amount       Decimal  @db.Decimal(10, 2)
    date         DateTime @default(now())

    Budget   Split?  @relation(fields: [budgetId], references: [id])
    budgetId String? @db.VarChar(255)

    authorId String @db.VarChar(255)
}

model Split {
    id        String   @id @default(uuid())
    createdAt DateTime @default(now())
    updatedAt DateTime @updatedAt

    name        String  @db.VarChar(255)
    description String  @db.VarChar(255)
    amount      Decimal @db.Decimal(10, 2)

    Recievables Receivable[]
    Payables    Payable[]

    authorId String  @db.VarChar(255)
    Group    Group?  @relation(fields: [groupId], references: [id])
    groupId  String?
}

model Group {
    id        String   @id @default(uuid())
    createdAt DateTime @default(now())
    updatedAt DateTime @updatedAt

    name        String @db.VarChar(255)
    description String @db.VarChar(255)
    amount      Decimal @db.Decimal(10, 2)

    authorId String @db.VarChar(255)

    Splits Split[]
}
